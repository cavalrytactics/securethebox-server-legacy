# securethebox-server
- Backend for securethebox app

## Developer Requirements
- git (Recommended to just install Github Desktop)
- Docker for Desktop
- Kubernetes helm - https://github.com/helm/helm
- nodejs 12.x & npm 6.x
- After you installed npm and nodejs, install these libraries globally
```
npm install -g npm-run-all
npm install -g cross-var
npm install -g commitizen
```

## Starting Service Locally
- Build docker image
```
npm run docker-b
```
- Run docker image and shell into it
```
npm run docker-r
```

## Learning about this project
Git
- Refer to https://github.com/ncmd/git-scripted README.md for instructions how to contribute to a github repo
- .gitignore ignores files/folders that are added to it

Python
- mainly using python3.7 for all development

Docker
- Development is done using docker so that it can work in any infrastructure/host
- Look at the Dockerfile for details
- The host requires docker-engine (Docker for Desktop automatically installs this)
- Using python:3.7-slim docker image because it is flexible compared to alpine

Node/npm
- npm/nodejs is used for development to automate common command line tasks
- Docker should not need to utilize nodejs (at least for now)
- Read package.json script section to see all command line arguments
- Example npm commands:
```
npm run dev - run app as DEV environment
npm run prod - run app as PROD environment
npm run pip-s - save current pip libraries to requirements.txt
npm run push-m - push to fork master branch
npm run push-b - push current branch to fork
npm run sync-l - sync fork master with local master
npm run sync-m - sync fork master with prod master
npm run docker-b - build docker image
npm run docker-r - run docker image and get shell
```

Spinnaker
- Service that will deploy helm charts

MinIO
- Similar as AWS S3 as an open-source alternative as well as self hosted

Heroku
- This is provider that will host this app
- Hosting is pretty much free while developing

Google Kubernetes Engine
- This is the kubernetes cluster provider

## Project File Structure
```
securethebox_server
├── app_routes/ (contain all api path routes)
│   ├── applications.py
│   └── challenges.py
│
├── app_controllers/ (contain all business logic for main app)
│   ├── accounts/
│   ├── applications/
│   ├── challenges/
│   ├── organizations/
│   ├── subscriptions/
│   └── submissions/
│
├── app_services/ (contain all functions and scripts that interact with external services)
│   ├── firebase/
│   ├── firestore/
│   ├── minio/
│   ├── stripe/
│   ├── sendgrid/
│   ├── spinnaker/
│   ├── googlekubernetesengine/
│   ├── googlerecaptcha/
│   └── heroku/
│
├── charts/ 
│   └── securethebox-server/
│
├── config/ (contain all api keys/credentials, not published because of .gitignore file)
│   ├── prod.py (prod keys/credentials)
│   └── dev.py (dev keys/credentials)
│
├── documentation/ (all documentation files)
│
├── node_modules/ (node libraries)
│
├── tests/ (contains all tests for CI-CD solution to check)
│   └── unit/ (folder containing unit tests)
│       └── controller_name_tests_.py
│
├── venv/ (generated by virtualenv)
│   └── bin/
│       ├──  activate (binary to activate virtualenv)
│       ├──  python3.7 (python binary that is able to run app.py)
│       └──  pip3 (pip binary)
│
├── .dockerignore (ignore files when doing `docker build` command)
├── .gitignore (ignore certain files specifically secrets and locally downloaded libraries)
│
├── app.py (securethebox's main python script to start app)
│
├── Dockerfile (docker file to build docker image)
│
├── package.lock.json (node/npm compiled file)
├── package.json (node/npm scripts)
│
├── README.md (Readme)
│
└── requirements.txt (required python libraries)
```